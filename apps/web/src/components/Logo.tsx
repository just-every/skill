import React from 'react';
import { Text } from 'react-native';
import type { SvgProps } from 'react-native-svg';

const LOGO_ASPECT_RATIO = 800 / 151;

const LOGO_PATHS: { d: string; fillRule?: 'evenodd' | 'nonzero' }[] = [
  {
    d:
      'M 52 45.032 C 52 92.810, 51.922 93.556, 46.486 97.832 C 44.369 99.498, 42.368 100, 37.850 100 C 32.609 100, 31.586 99.647, 28.432 96.750 C 24.742 93.360, 23.068 88.718, 23.024 81.750 L 23 78 11.500 78 L 0 78 0 81.558 C 0 83.516, 0.501 88.353, 1.113 92.308 C 3.860 110.055, 14.337 119.180, 33.723 120.713 C 51.937 122.154, 66.785 114.597, 72.220 101.121 C 74.446 95.599, 74.492 94.671, 74.797 48.250 L 75.108 1 63.554 1 L 52 1 52 45.032',
    fillRule: 'evenodd',
  },
  {
    d:
      'M 89.401 35.397 C 89.106 36.166, 89.018 50.228, 89.205 66.647 C 89.529 95.060, 89.656 96.778, 91.850 102.266 C 94.973 110.077, 98.323 113.765, 105.284 117.057 C 110.385 119.469, 112.369 119.833, 120.406 119.833 C 131.157 119.833, 136.275 118.055, 142.250 112.242 L 146 108.594 146 113.297 L 146 118 157.511 118 L 169.022 118 168.761 76.250 L 168.500 34.500 157.250 34.217 L 146 33.934 146 60.499 C 146 88.329, 145.586 91.428, 141.212 96.355 C 138.586 99.312, 131.980 101.954, 127.151 101.978 C 120.780 102.010, 116.456 99.573, 114.044 94.591 C 112.134 90.644, 112 88.528, 112 62.184 L 112 34 100.969 34 C 92.446 34, 89.815 34.318, 89.401 35.397',
    fillRule: 'evenodd',
  },
  {
    d:
      'M 201.108 33.592 C 194.431 35.468, 187.112 40.163, 184.170 44.456 C 178.217 53.145, 178.699 65.165, 185.305 72.700 C 188.452 76.291, 198.029 81.394, 203.642 82.470 C 205.214 82.771, 210.325 83.695, 215 84.522 C 229.405 87.071, 233 89.099, 233 94.675 C 233 101.816, 228.169 105.001, 217.346 104.996 C 207.808 104.992, 203.664 102.937, 201.158 96.969 L 199.500 93.020 189.250 93.010 C 179.125 93, 179 93.029, 179 95.374 C 179 103.439, 186.621 113.439, 195.407 116.903 C 209.417 122.427, 229.071 122.086, 240.772 116.116 C 251.024 110.886, 256.550 99.424, 254.207 88.251 C 251.571 75.684, 244.889 71.481, 220.390 66.980 C 207.632 64.636, 203.593 62.846, 201.914 58.793 C 199.308 52.501, 205.876 47.003, 216 47.003 C 222.916 47.003, 227.764 49.358, 230.918 54.250 L 233.335 58 243.187 58 L 253.038 58 252.412 55.250 C 250.239 45.700, 242.505 37.519, 232.685 34.383 C 225.449 32.073, 208.064 31.637, 201.108 33.592',
    fillRule: 'evenodd',
  },
  {
    d:
      'M 270.809 21.998 L 271.118 34 263.559 34 L 256 34 256 42.500 L 256 51 263.500 51 L 271 51 271.022 77.750 C 271.042 101.560, 271.246 104.940, 272.881 108.500 C 276.405 116.175, 282.503 119, 295.544 119 C 307.341 119, 307 119.286, 307 109.393 L 307 101 302 101 C 298.333 101, 296.467 100.467, 295 99 C 293.116 97.116, 293 95.667, 293 74 L 293 51 300 51 L 307 51 307 42.418 L 307 33.836 299.998 34.168 L 292.995 34.500 292.998 22.250 L 293 10 281.750 9.998 L 270.500 9.996 270.809 21.998',
    fillRule: 'evenodd',
  },
  {
    d:
      'M 317 59.500 L 317 118 361 118 L 405 118 405 108 L 405 98 373 98 L 341 98 341 83.500 L 341 69 369 69 L 397 69 397 59 L 397 49 369 49 L 341 49 341 34.500 L 341 20 372 20 L 403 20 403 10.500 L 403 1 360 1 L 317 1 317 59.500',
    fillRule: 'evenodd',
  },
  {
    d:
      'M 408 34.414 C 408 35.287, 420.532 71.287, 432.908 105.966 C 435.159 112.273, 437 117.560, 437 117.716 C 437 117.872, 443.007 118, 450.348 118 L 463.696 118 465.272 113.250 C 466.138 110.638, 470.738 97.700, 475.494 84.500 C 488.299 48.960, 493 35.592, 493 34.717 C 493 34.287, 487.999 34.062, 481.887 34.217 L 470.774 34.500 469.453 38 C 468.726 39.925, 464.223 53.538, 459.447 68.250 C 454.670 82.963, 450.451 95, 450.071 95 C 449.691 95, 447.903 89.713, 446.097 83.250 C 444.291 76.787, 442.249 69.700, 441.560 67.500 C 439.420 60.675, 438.295 56.880, 434.964 45.250 L 431.741 34 419.870 34 C 413.342 34, 408 34.186, 408 34.414',
    fillRule: 'evenodd',
  },
  {
    d:
      'M 522.348 33.425 C 515.464 35.184, 507.013 40.136, 502.647 44.969 C 495.296 53.105, 492.030 62.756, 492.012 76.392 C 491.977 102.227, 506.828 118.807, 531.723 120.727 C 551.075 122.220, 567.100 113.304, 572.483 98.049 L 573.911 94 563.339 94 L 552.766 94 548.947 97.935 C 540.722 106.411, 526.519 105.792, 519.550 96.654 C 517.033 93.355, 513.491 84.176, 514.388 83.279 C 514.603 83.063, 528.395 82.925, 545.037 82.971 L 575.294 83.055 574.713 73.277 C 574.016 61.548, 571.436 53.427, 566.206 46.500 C 562.350 41.393, 554.320 35.823, 548.014 33.882 C 542.554 32.201, 528.143 31.944, 522.348 33.425 M 525.500 50.401 C 522.530 51.816, 519.621 54.146, 518.335 56.141 C 515.982 59.792, 513.855 66.521, 514.766 67.433 C 515.078 67.745, 523.642 68, 533.797 68 L 552.260 68 551.752 63.489 C 551.092 57.637, 547.528 52.473, 542.434 49.985 C 537.055 47.359, 531.607 47.492, 525.500 50.401',
    fillRule: 'evenodd',
  },
  {
    d:
      'M 619.459 35.367 C 614.795 37.539, 609 42.918, 609 45.077 C 609 45.585, 608.550 46, 608 46 C 607.444 46, 607 43.333, 607 40 L 607 34 596 34 L 585 34 585 76 L 585 118 596.500 118 L 608 118 608.022 94.250 C 608.041 73.442, 608.270 70.003, 609.865 66.491 C 613.486 58.520, 621.950 53.477, 630.557 54.161 L 635 54.514 635 43.757 L 635 33 629.750 33.010 C 626.357 33.016, 622.717 33.850, 619.459 35.367',
    fillRule: 'evenodd',
  },
  {
    d:
      'M 641 34.808 C 641 35.713, 647.552 52.791, 652.008 63.500 C 653.609 67.350, 657.449 77.025, 660.540 85 C 663.631 92.975, 667.788 103.547, 669.778 108.494 C 673.606 118.013, 673.876 120.416, 671.603 124.783 C 668.691 130.380, 665.427 132.378, 658.468 132.821 L 652 133.233 652 141.616 L 652 150 656.250 150.153 C 673.389 150.769, 682.915 147.345, 689.111 138.339 C 691.656 134.640, 700.523 112.780, 709.937 87 C 711.443 82.875, 716.348 69.735, 720.838 57.800 C 725.327 45.865, 729 35.627, 729 35.050 C 729 34.380, 725.015 34, 718 34 C 711.950 34, 707 34.153, 707 34.339 C 707 35.203, 689.587 84.372, 686.813 91.341 C 685.861 93.732, 685.538 93.925, 684.774 92.560 C 683.864 90.935, 676.688 69.228, 669.464 46.250 L 665.612 34 653.306 34 C 646.538 34, 641 34.363, 641 34.808',
    fillRule: 'evenodd',
  },
  {
    d: 'M 720 118 L 726 100 L 799 100 L 793 118 Z',
  },
];

type SvgModule = typeof import('react-native-svg');

let svgModule: SvgModule | null = null;

const getSvgModule = (): SvgModule | null => {
  if (svgModule !== null) {
    return svgModule;
  }
  try {
    svgModule = require('react-native-svg') as SvgModule;
  } catch {
    svgModule = null;
  }
  return svgModule;
};

export type LogoProps = SvgProps & {
  readonly size?: number;
  readonly color?: string;
};

export const Logo = (props: LogoProps) => {
  const {
    size = 28,
    color = '#0f172a',
    width,
    height,
    accessibilityLabel = 'justevery logo',
    ...rest
  } = props;

  const svg = getSvgModule();

  if (!svg) {
    return (
      <Text style={{ fontSize: Math.round(size * 0.7), fontWeight: '700', color }} accessibilityRole="text">
        je
      </Text>
    );
  }

  const computedHeight = typeof height === 'number' ? height : size;
  const computedWidth = typeof width === 'number' ? width : Math.round(computedHeight * LOGO_ASPECT_RATIO);
  const { Svg, Path } = svg;

  return (
    <Svg
      {...rest}
      width={computedWidth}
      height={computedHeight}
      viewBox="0 0 800 151"
      fill="none"
      accessible
      accessibilityRole="image"
      accessibilityLabel={accessibilityLabel}
    >
      {LOGO_PATHS.map((path, index) => (
        <Path key={index} d={path.d} fill={color} fillRule={path.fillRule ?? 'nonzero'} />
      ))}
    </Svg>
  );
};
